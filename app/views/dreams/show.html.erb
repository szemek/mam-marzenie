<%- model_class = Dream -%>
<div class='page-header'>
  <h1>
    <%= @dream.title %>
    <small><%= @dream.child_fullname %> <%= @dream.child_age %></small></h1>
</div>

<dl class="dl-horizontal">
  <dt><strong><%= model_class.human_attribute_name(:region) %>:</strong></dt>
  <dd><%= @dream.region %></dd>
  <dt><strong><%= model_class.human_attribute_name(:category) %>:</strong></dt>
  <dd><%= @dream.category %></dd>
  <dt><strong><%= model_class.human_attribute_name(:status) %>:</strong></dt>
  <dd><%= t(@dream.status) %></dd>
</dl>

<div class="form-actions">
  <%= link_to t('.back', default: t("helpers.links.back")),
              dreams_path, class: 'btn'  %>
  <%= link_to t('.edit', default: t("helpers.links.edit")),
              edit_dream_path(@dream), class: 'btn' %>
  <%= link_to t('.destroy', default: t("helpers.links.destroy")),
              dream_path(@dream),
              method: 'delete',
              data: { confirm: t('.confirm', default: t('helpers.links.confirm')) },
              class: 'btn btn-danger' %>
</div>
<div>
    <%= simple_form_for @task,
      defaults:{
        wrapper_html: { class: 'form-group'},
        input_html: { class: 'form-control' }
      } do |f|
    %>
      <%= f.input :sponsor %>
      <%= f.select :result, [[:pending, nil],[:success, true],[:failed, false]] %>
      <%= f.input :description, as: :text%>
      <%= f.hidden_field :dream_id, value: @dream.id %>
      <%= f.submit nil, class: 'btn btn-default' %>
    <% end %>
</div>
<table class='table table-striped'>
  <thead>
    <tr>
      <th> Wolontariusz </th>
      <th> Sponsor </th>
      <th> Opis </th>
      <th> Status </th>
    </tr>
  </thead>
  <tbody>
    <% @dream.tasks.each do |task| %>
      <tr>
        <td><%= task.user.fullname %></td>
        <td><%= task.sponsor.fullname %></td>
        <td><%= task.description %></td>
        <td><%= task.result %></td>
      </tr>
    <% end %>
  </tbody>
</table>